<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rampers - Ice Harvester Racing Game</title>
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #87CEEB; /* Light blue sky */
            overflow: hidden;
            touch-action: manipulation; /* Enable touch for mobile */
        }
        canvas {
            border: 1px solid black;
        }
        #gameOver, #restartButton {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: Arial, sans-serif;
            text-align: center;
            display: none;
        }
        #gameOver {
            font-size: 48px;
            color: red;
        }
        #restartButton {
            font-size: 24px;
            padding: 10px 20px;
            background-color: #4CAF50; /* Green button */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #restartButton:hover {
            background-color: #45a049; /* Darker green on hover */
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <div id="gameOver">Game Over</div>
    <button id="restartButton">Restart</button>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const gameOverText = document.getElementById('gameOver');
        const restartButton = document.getElementById('restartButton');

        // Skater (Ice Harvester) settings
        const skater = {
            x: canvas.width / 2 - 20, // Start in middle of screen horizontally
            y: 0, // Will be set to track position
            width: 40,
            height: 80,
            speed: 5,
            dx: 0, // Horizontal movement on track
            dy: 0, // Vertical movement (gravity)
            offset: 0, // Offset from track center
            skateAngle: 0, // Angle for skating motion
            color: '#4682B4' // Blue eskimo suit (placeholder)
        };

        // Track settings
        const track = {
            color: '#FF4040', // Red icy track
            speed: 0, // Track movement speed (controlled by player)
            position: 0 // Current position of track
        };

        // Gravity and physics
        const gravity = 0.5;
        const trackWidth = 20; // Width of the track
        let gameRunning = true;

        // Draw the track (mostly flat with occasional ramps/drops)
        function drawTrack() {
            ctx.strokeStyle = track.color;
            ctx.lineWidth = trackWidth;
            ctx.beginPath();
            for (let x = 0; x < canvas.width + 1000; x += 10) { // Extend track for smooth scrolling
                const trackPos = x - track.position;
                // Mostly flat, with occasional ramps (sinusoidal with lower amplitude and ramps)
                let y;
                if (trackPos % 800 < 200) { // Flat section
                    y = 300;
                } else if (trackPos % 800 < 400) { // Ramp up (skate park schans)
                    y = 300 - 50 * Math.sin((trackPos % 800 - 200) / 200 * Math.PI);
                } else if (trackPos % 800 < 600) { // Flat section
                    y = 250;
                } else { // Drop (afdaling for extra speed)
                    y = 250 + 50 * Math.sin((trackPos % 800 - 600) / 200 * Math.PI);
                }
                if (x === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
        }

        // Draw the skater (placeholder - replace with your image)
        function drawSkater() {
            // Blue eskimo suit (body)
            ctx.fillStyle = skater.color; // Blue
            ctx.fillRect(skater.x, skater.y, skater.width, skater.height);

            // White hat
            ctx.fillStyle = '#FFFFFF'; // White
            ctx.beginPath();
            ctx.arc(skater.x + skater.width / 2, skater.y + 10, 15, 0, Math.PI * 2);
            ctx.fill();

            // Brown beard
            ctx.fillStyle = '#8B4513'; // Brown
            ctx.fillRect(skater.x + 10, skater.y + 30, 20, 10);

            // Gray feet with moving skates
            ctx.fillStyle = '#808080'; // Gray feet
            ctx.fillRect(skater.x + 5, skater.y + skater.height - 20, 15, 10); // Left foot
            ctx.fillRect(skater.x + 20, skater.y + skater.height - 20, 15, 10); // Right foot

            // Moving skate blades (animate when accelerating)
            const bladeLength = 15;
            const bladeOffset = Math.sin(skater.skateAngle) * 5; // Oscillating motion
            ctx.strokeStyle = '#000000'; // Black skates
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(skater.x + 5, skater.y + skater.height - 10);
            ctx.lineTo(skater.x + 5 + bladeOffset, skater.y + skater.height - 10 + bladeLength);
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(skater.x + 20, skater.y + skater.height - 10);
            ctx.lineTo(skater.x + 20 + bladeOffset, skater.y + skater.height - 10 + bladeLength);
            ctx.stroke();
        }

        // Update skater and track position
        function update() {
            if (!gameRunning) return;

            // Apply gravity
            skater.dy += gravity;
            skater.y += skater.dy;

            // Calculate track position at skater's x (accounting for scroll)
            const trackX = skater.x + track.position;
            let trackY;
            if (trackX % 800 < 200) { // Flat section
                trackY = 300;
            } else if (trackX % 800 < 400) { // Ramp up
                trackY = 300 - 50 * Math.sin((trackX % 800 - 200) / 200 * Math.PI);
            } else if (trackX % 800 < 600) { // Flat section
                trackY = 250;
            } else { // Drop
                trackY = 250 + 50 * Math.sin((trackX % 800 - 600) / 200 * Math.PI);
            }
            const trackAngle = Math.atan2(50 * Math.cos(trackX / 200 * Math.PI), 1); // Angle for ramps/drops

            // Keep skater on track (simple collision)
            const halfTrackWidth = trackWidth / 2;
            const skaterHalfWidth = skater.width / 2;
            if (Math.abs(skater.offset) > halfTrackWidth - skaterHalfWidth || skater.y > trackY + 50) {
                gameOver();
                return;
            }

            // Position skater on track
            skater.y = trackY - skater.height + skater.offset;

            // Move track based on speed (controlled by player)
            track.position += track.speed;
            if (track.position > 1000) track.position = 0; // Reset for infinite scrolling

            // Keep skater in middle of screen horizontally
            skater.x = canvas.width / 2 - skater.width / 2;

            // Apply sliding on ice (reduce speed gradually if not accelerating)
            if (track.speed > 0 && !keys.ArrowUp && !touchActive) {
                track.speed *= 0.98; // Slow down naturally on ice
            }
            if (track.speed < 0) track.speed = 0; // Prevent negative speed

            // Animate skates when accelerating
            if (track.speed > 0) {
                skater.skateAngle += 0.1; // Oscillating motion for skates
            } else {
                skater.skateAngle = 0; // Reset if not moving
            }
        }

        // Draw background
        function drawBackground() {
            ctx.fillStyle = '#FFFFFF'; // White snow
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        // Handle keyboard input
        const keys = {};
        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
            if (e.key === 'ArrowUp' && track.speed < 10) track.speed = 5; // Gas (move track faster, cap at 10)
            if (e.key === 'ArrowDown') track.speed = 0; // Brake (stop track)
            if (e.key === 'ArrowLeft') skater.offset -= 2; // Move left on track
            if (e.key === 'ArrowRight') skater.offset += 2; // Move right on track
        });

        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        // Handle touch input for mobile
        let touchActive = false;
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            touchActive = true;
            if (track.speed < 10) track.speed = 5; // Gas when touching
        });

        canvas.addEventListener('touchend', (e) => {
            e.preventDefault();
            touchActive = false;
            track.speed = 0; // Brake when releasing touch
        });

        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            const rect = canvas.getBoundingClientRect();
            const touchX = touch.clientX - rect.left;
            const centerX = canvas.width / 2;

            if (touchX < centerX - 50) skater.offset -= 2; // Move left
            else if (touchX > centerX + 50) skater.offset += 2; // Move right
        });

        // Game over function
        function gameOver() {
            gameRunning = false;
            gameOverText.style.display = 'block';
            restartButton.style.display = 'block';
        }

        // Restart function
        restartButton.addEventListener('click', () => {
            gameRunning = true;
            gameOverText.style.display = 'none';
            restartButton.style.display = 'none';
            // Reset game state
            skater.x = canvas.width / 2 - 20;
            skater.y = 300 - skater.height; // Start on flat track
            skater.dy = 0;
            skater.offset = 0;
            skater.skateAngle = 0;
            track.position = 0;
            track.speed = 0;
        });

        // Main game loop
        function gameLoop() {
            drawBackground();
            drawTrack();
            drawSkater();
            update();
            requestAnimationFrame(gameLoop);
        }

        // Start the game with skater on track
        skater.y = 300 - skater.height; // Start on the flat track
        gameLoop();
    </script>
</body>
</html>
