<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freestyle Hockey Skater</title>
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #87CEEB; /* Lichtblauwe achtergrond voor ijsthema */
            font-family: Arial, sans-serif;
        }
        canvas {
            border: 1px solid black;
            background-color: #FFFFFF;
        }
        #score {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            font-size: 20px;
        }
        #jumpButton {
            position: absolute;
            bottom: 20px;
            right: 20px;
            padding: 15px;
            font-size: 18px;
            background-color: #00FF00;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #jumpButton:hover {
            background-color: #00CC00;
        }
        #levelSelect {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        #levelSelect button {
            padding: 10px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="score">Score: 0</div>
    <canvas id="gameCanvas" width="800" height="400"></canvas>
    <button id="jumpButton" onmousedown="jump()" ontouchstart="jump()">Spring!</button>
    <div id="levelSelect">
        <h2>Kies een Level</h2>
        <button onclick="startGame(1)">Level 1</button>
        <button onclick="startGame(2)">Level 2</button>
        <button onclick="startGame(3)">Level 3</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('score');
        const levelSelect = document.getElementById('levelSelect');

        // Spelvariabelen
        let skater = {
            x: 50,          // Startpositie X
            y: 300,         // Startpositie Y (boven grond)
            width: 20,      // Breedte skater
            height: 40,     // Hoogte skater
            velocityY: 0,   // Snelheid in Y-richting
            rotation: 0,    // Rotatie in graden
            isJumping: false // Staat de skater in de lucht?
        };
        let groundY = 340;  // Hoogte van de grond
        let speedX = 3;     // Voorwaartse snelheid
        let score = 0;      // Huidige score
        let highscore = localStorage.getItem('highscore') ? parseInt(localStorage.getItem('highscore')) : 0;
        let gameRunning = false;
        let obstacles = []; // Lijst met obstakels/rampen

        // Fysica
        const gravity = 0.5;
        const jumpForce = -10;

        // Level-specifieke instellingen
        function loadLevel(level) {
            obstacles = [];
            if (level === 1) {
                obstacles.push({ x: 200, y: groundY - 20, width: 100, height: 20 }); // Kleine ramp
                obstacles.push({ x: 400, y: groundY - 40, width: 150, height: 40 }); // Grotere ramp
            } else if (level === 2) {
                obstacles.push({ x: 250, y: groundY - 30, width: 120, height: 30 });
                obstacles.push({ x: 500, y: groundY - 50, width: 200, height: 50 });
            } else if (level === 3) {
                obstacles.push({ x: 150, y: groundY - 25, width: 80, height: 25 });
                obstacles.push({ x: 350, y: groundY - 60, width: 180, height: 60 });
                obstacles.push({ x: 600, y: groundY - 40, width: 140, height: 40 });
            }
        }

        // Start het spel met een gekozen level
        function startGame(level) {
            gameRunning = true;
            levelSelect.style.display = 'none';
            score = 0;
            skater.x = 50;
            skater.y = 300;
            skater.velocityY = 0;
            skater.rotation = 0;
            loadLevel(level);
            gameLoop();
        }

        // Springfunctie
        function jump() {
            if (!skater.isJumping && gameRunning) {
                skater.velocityY = jumpForce;
                skater.isJumping = true;
            }
        }

        // Toetsenbordbesturing
        document.addEventListener('keydown', (event) => {
            if (event.code === 'Space') jump();
        });

        // Hoofdgame loop
        function gameLoop() {
            if (!gameRunning) return;

            // Update skater positie
            skater.velocityY += gravity;
            skater.y += skater.velocityY;
            skater.x += speedX;

            // Gronddetectie
            if (skater.y + skater.height > groundY) {
                skater.y = groundY - skater.height;
                skater.velocityY = 0;
                if (skater.isJumping) {
                    skater.isJumping = false;
                    if (Math.abs(skater.rotation) < 15) { // Goede landing
                        score += 100; // Basis landingspunten
                    } else {
                        gameRunning = false; // Crash: spel stopt
                        alert('Crash! Score: ' + score);
                        if (score > highscore) {
                            highscore = score;
                            localStorage.setItem('highscore', highscore);
                        }
                        levelSelect.style.display = 'block';
                        return;
                    }
                    skater.rotation = 0;
                }
            }

            // Rotatie in de lucht
            if (skater.isJumping) {
                skater.rotation += 5; // Simpele rotatie
                score += 1; // Extra punten voor tijd in de lucht
            }

            // Obstakel/ramp interactie
            obstacles.forEach(obstacle => {
                if (skater.x + skater.width > obstacle.x && skater.x < obstacle.x + obstacle.width &&
                    skater.y + skater.height > obstacle.y && skater.y < obstacle.y + obstacle.height) {
                    if (skater.velocityY > 0) { // Landen op ramp
                        skater.y = obstacle.y - skater.height;
                        skater.velocityY = -5; // Kleine boost
                        skater.isJumping = true;
                        score += 50; // Punten voor ramp
                    }
                }
            });

            // Scherm leegmaken en tekenen
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Teken grond
            ctx.fillStyle = '#ADD8E6';
            ctx.fillRect(0, groundY, canvas.width, canvas.height - groundY);

            // Teken obstakels/rampen
            ctx.fillStyle = '#B0C4DE';
            obstacles.forEach(obstacle => {
                ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
            });

            // Teken skater (eenvoudige rechthoek)
            ctx.save();
            ctx.translate(skater.x + skater.width / 2, skater.y + skater.height / 2);
            ctx.rotate(skater.rotation * Math.PI / 180);
            ctx.fillStyle = '#0000FF'; // Blauwe skater (ijsthema)
            ctx.fillRect(-skater.width / 2, -skater.height / 2, skater.width, skater.height);
            ctx.restore();

            // Update score
            scoreDisplay.textContent = `Score: ${score} | Highscore: ${highscore}`;

            // Loop doorgaan
            requestAnimationFrame(gameLoop);
        }
    </script>
</body>
</html>
